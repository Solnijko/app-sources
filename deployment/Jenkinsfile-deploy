pipeline {
    agent any 
    triggers {
      upstream 'petclinic-build'
    }
    stages {
    stage('Deploy') { 
        steps {
            ansiblePlaybook hostKeyChecking: false, credentialsId: 'SSH-server-credentials', extras: '-e BUILD_ID=${UPSTREAM_BUILD_ID}', inventory: 'deployment/inventory.yml', playbook: 'deployment/deploy-petclinic.yml'
        }
    }
    }
}
